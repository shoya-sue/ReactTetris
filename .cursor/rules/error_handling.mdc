---
description: 
globs: 
alwaysApply: true
---
---
description: エラーハンドリングルール設定
---

# エラーハンドリングルール

## エラーバウンダリ
### 配置
- ルートレベル: 必須
- 機能レベル: 必須
- コンポーネントレベル: 必要に応じて

### リカバリー戦略
- リトライ機能の提供
- 代替UIの表示
- エラーログの送信

## APIエラー
### ステータスコード
- 400: バリデーションエラー
- 401: 認証エラー
- 403: 権限エラー
- 404: リソース未発見
- 500: サーバーエラー

### レスポンス形式
```json
{
  "error": {
    "code": "エラーコード",
    "message": "ユーザー向けメッセージ",
    "details": "詳細情報",
    "timestamp": "発生時刻"
  }
}
```

## ログ
### ログレベル
- error: 重大なエラー
- warn: 警告
- info: 情報
- debug: デバッグ情報

### 必須フィールド
- timestamp: タイムスタンプ
- error_id: エラーID
- user_id: ユーザーID
- stack_trace: スタックトレース
- context: コンテキスト情報

## ユーザーフィードバック
### メッセージ
- フレンドリーな表現
- アクション可能な内容
- 明確な説明

### リトライメカニズム
- 最大試行回数: 3回
- バックオフ戦略: 指数バックオフ
- 初期遅延: 1秒

## モニタリング
### エラー追跡
- サービス: Sentry
- サンプルレート: 100%
- 環境: development, staging, production

### アラート
- 閾値: 5分間で10エラー
- 通知: Slack, Email 